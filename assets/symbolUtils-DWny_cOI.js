const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Cv0-fPI4.js","assets/index-DZndqy9Z.css"])))=>i.map(i=>d[i]);
import{aG as m,j2 as L,bZ as R,_ as k,g$ as z}from"./index-Cv0-fPI4.js";import{L as u,M as O,N as C}from"./utils-CW5MoO23.js";const h=m("android");m("chrome")||h&&h>=4;L();function f(a){return a&&a.opacity!==void 0?a.opacity*("parent"in a?f(a.parent):1):1}async function G(a,e){var g;if(!a)return;const y=a.sourceLayer,t=(e!=null&&e.useSourceLayer?y:a.layer)??y,s=e!=null&&e.ignoreOpacity?1:f(t);if(a.symbol!=null&&(e==null||e.ignoreGraphicSymbol!==!0)){const r=a.symbol.type==="web-style"?await a.symbol.fetchSymbol({...e,acceptedFormats:e==null?void 0:e.webStyleAcceptedFormats,cache:e==null?void 0:e.webStyleCache}):a.symbol.clone();return u(r,null,{add:s}),r}const o=(e==null?void 0:e.renderer)??q(t);let i=o&&"getSymbolAsync"in o?await o.getSymbolAsync(a,e):null;if(!i)return;if(i=i.type==="web-style"?await i.fetchSymbol({...e,acceptedFormats:e==null?void 0:e.webStyleAcceptedFormats,cache:e==null?void 0:e.webStyleCache}):i.clone(),!(o&&"visualVariables"in o&&((g=o.visualVariables)!=null&&g.length)&&j(i)))return u(i,null,{add:s}),i;if("arcadeRequiredForVisualVariables"in o&&o.arcadeRequiredForVisualVariables&&(e==null?void 0:e.arcade)==null){const r={...e};r.arcade=await R(),e=r}const{getColor:w,getOpacity:S,getAllSizes:V,getRotationAngle:v}=await k(()=>import("./index-Cv0-fPI4.js").then(r=>r.uT),__vite__mapDeps([0,1])),n=[],l=[],c=[],b=[];for(const r of o.visualVariables)switch(r.type){case"color":n.push(r);break;case"opacity":l.push(r);break;case"rotation":b.push(r);break;case"size":r.target||c.push(r)}const d=!!n.length&&n[n.length-1],_=d?w(d,a,e):null,A=!!(e!=null&&e.ignoreOpacity),p=!!l.length&&l[l.length-1],F=p?S(p,a,e):null;if(u(i,_,A?void 0:{override:F,add:s}),c.length&&(e==null?void 0:e.ignoreSizeVariables)!==!0){const r=V(c,a,e);await O(i,r)}if((e==null?void 0:e.ignoreRotationVariables)!==!0)for(const r of b)C(i,v(r,a,e),r.axis);return i}function j(a){var e;return!z(a)||((e=a.symbolLayers.at(0))==null?void 0:e.type)!=="water"}function q(a){if(a)return"renderer"in a?a.renderer:void 0}export{G as F};
