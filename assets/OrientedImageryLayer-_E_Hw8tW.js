import{j4 as B,kx as Z,ky as Q,j5 as X,Z as e,a0 as t,a1 as S,cp as ee,ev as k,af as O,ib as A,ag as Y,ai as _,b as te,lV as re,cn as ie,a2 as oe,o4 as ne,ap as ae,ia as se}from"./index-MBf2dn39.js";import pe from"./FeatureLayer-DPz5Sz8s.js";import"./FormTemplate-BjQPlHyn.js";import"./editsZScale-0rFKqFhV.js";import"./queryZScale-BYJvoMMy.js";import"./APIKeyMixin-BRHmChzy.js";import"./ArcGISService-C5lmGAY8.js";import"./EditBusLayer-Cbt0F2i4.js";import"./FeatureLayerBase-C41xOtls.js";import"./LayerFloorInfo-wPVJ2oRr.js";import"./multiLayerServiceUtils-B4fwsobX.js";import"./Relationship-BHc0cwJV.js";import"./serviceCapabilitiesUtils-woBObEqx.js";import"./infoFor3D-dHKPbXlj.js";import"./FeatureType-CDqhK1ZB.js";import"./TitleCreator-CL5UGXe0.js";import"./versionUtils-CSWgFRM9.js";import"./styleUtils-B3m3e1PV.js";const le=Symbol("isOrientedImageryGraphicOrigin");var G;let ue=class extends B{get[(G=le,Z)](){return this.layer}get[Q](){return this.layer}get[X](){return this.layer}constructor(i){super(),this[G]=!0,this.type="oriented-imagery",this.layer=i}get id(){return this.layer.id}},I=class extends ee{set horizontalWKID(i){i?k({wkid:+i})?this._set("horizontalWKID",+i):this._set("horizontalWKID",i):this._set("horizontalWKID",null)}set verticalWKID(i){i?this._set("verticalWKID",isFinite(i)&&k({wkid:+i})?+i:null):this._set("verticalWKID",null)}get isAdvanced(){const{affineTransformations:i,focalLength:o,principalOffsetPoint:n,radialDistortionCoefficients:p,tangentialDistortionCoefficients:s}=this;return(i==null?void 0:i.length)>1&&!Number.isNaN(o)&&(n==null?void 0:n.length)>1&&(p==null?void 0:p.length)>1&&(s==null?void 0:s.length)>1}};e([t({json:{write:!0}})],I.prototype,"affineTransformations",void 0),e([t({json:{write:!0}})],I.prototype,"focalLength",void 0),e([t({json:{write:!0}})],I.prototype,"principalOffsetPoint",void 0),e([t({json:{write:!0}})],I.prototype,"radialDistortionCoefficients",void 0),e([t({json:{write:!0}})],I.prototype,"tangentialDistortionCoefficients",void 0),e([t({json:{write:!0}})],I.prototype,"horizontalWKID",null),e([t({json:{write:!0}})],I.prototype,"verticalWKID",null),e([t({json:{write:!0}})],I.prototype,"x",void 0),e([t({json:{write:!0}})],I.prototype,"y",void 0),e([t({json:{write:!0}})],I.prototype,"z",void 0),e([t({json:{write:!0}})],I.prototype,"type",void 0),I=e([S("esri.layers.orientedImagery.core.CameraOrientation")],I);const M=I;let j=class extends O(A(M)){constructor(){super(...arguments),this.type=1}toString(){const{type:i,horizontalWKID:o,verticalWKID:n,x:p,y:s,z:d,heading:u,pitch:h,roll:v,affineTransformations:w,focalLength:N,principalOffsetPoint:m,radialDistortionCoefficients:g,tangentialDistortionCoefficients:f}=this,l=[i,o,n,p,s,d,u,h,v];return this.isAdvanced&&(w==null||w.forEach(y=>l.push(y)),l.push(N),m==null||m.forEach(y=>l.push(y)),g==null||g.forEach(y=>l.push(y)),f==null||f.forEach(y=>l.push(y))),l.map(y=>Number.isNaN(y)?"":y).join("|")}};e([t({json:{write:!0}})],j.prototype,"type",void 0),e([t({type:[Number],json:{write:!0}})],j.prototype,"affineTransformations",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"focalLength",void 0),e([t({type:[Number],json:{write:!0}})],j.prototype,"principalOffsetPoint",void 0),e([t({type:[Number],json:{write:!0}})],j.prototype,"radialDistortionCoefficients",void 0),e([t({type:[Number],json:{write:!0}})],j.prototype,"tangentialDistortionCoefficients",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"heading",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"pitch",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"roll",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"x",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"y",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"z",void 0),j=e([S("esri.layers.orientedImagery.core.CameraOrientationHPR")],j);const ye=j;let D=class extends O(A(M)){constructor(){super(...arguments),this.type=4}toString(){const{type:i,latitude:o,longitude:n,ellipsoidRadius:p,squaredEccentricity:s,properties:d}=this,u=`${d}`.split("|");return u.splice(1,1),`${i}|${o}|${n}|${p}|${s}|${u.join("|")}`}};e([t({json:{write:!0}})],D.prototype,"type",void 0),e([t({json:{write:!0},type:Number})],D.prototype,"latitude",void 0),e([t({json:{write:!0},type:Number})],D.prototype,"longitude",void 0),e([t({json:{write:!0},type:Number})],D.prototype,"ellipsoidRadius",void 0),e([t({json:{write:!0},type:Number})],D.prototype,"squaredEccentricity",void 0),e([t({json:{write:!0}})],D.prototype,"properties",void 0),D=e([S("esri.layers.orientedImagery.core.CameraOrientationLTP")],D);const ce=D;let b=class extends O(A(M)){constructor(){super(...arguments),this.type=2}toString(){const{type:r,horizontalWKID:i,verticalWKID:o,x:n,y:p,z:s,omega:d,phi:u,kappa:h,affineTransformations:v,focalLength:w,principalOffsetPoint:N,radialDistortionCoefficients:m,tangentialDistortionCoefficients:g}=this,f=[r,i,o,n,p,s,d,u,h];return this.isAdvanced&&(v==null||v.forEach(l=>f.push(l)),f.push(w),N==null||N.forEach(l=>f.push(l)),m==null||m.forEach(l=>f.push(l)),g==null||g.forEach(l=>f.push(l))),f.map(l=>isNaN(l)?"":l).join("|")}};e([t({json:{write:!0}})],b.prototype,"type",void 0),e([t({type:[Number],json:{write:!0}})],b.prototype,"affineTransformations",void 0),e([t({type:Number,json:{write:!0}})],b.prototype,"focalLength",void 0),e([t({type:[Number],json:{write:!0}})],b.prototype,"principalOffsetPoint",void 0),e([t({type:[Number],json:{write:!0}})],b.prototype,"radialDistortionCoefficients",void 0),e([t({type:[Number],json:{write:!0}})],b.prototype,"tangentialDistortionCoefficients",void 0),e([t({type:Number,json:{write:!0}})],b.prototype,"omega",void 0),e([t({type:Number,json:{write:!0}})],b.prototype,"phi",void 0),e([t({type:Number,json:{write:!0}})],b.prototype,"kappa",void 0),e([t({type:Number,json:{write:!0}})],b.prototype,"x",void 0),e([t({type:Number,json:{write:!0}})],b.prototype,"y",void 0),e([t({type:Number,json:{write:!0}})],b.prototype,"z",void 0),b=e([S("esri.layers.orientedImagery.core.CameraOrientationOPK")],b);const de=b;let P=class extends O(A(M)){constructor(){super(...arguments),this.type=3}get isAdvanced(){const{affineTransformations:i,focalLength:o,principalOffsetPoint:n,radialDistortionCoefficients:p,tangentialDistortionCoefficients:s}=this;return(i==null?void 0:i.length)>1||!Number.isNaN(o)||(n==null?void 0:n.length)>1||(p==null?void 0:p.length)>1||(s==null?void 0:s.length)>1}toString(){const{type:i,horizontalWKID:o,verticalWKID:n,x:p,y:s,z:d,yaw:u,pitch:h,roll:v,affineTransformations:w,focalLength:N,principalOffsetPoint:m,radialDistortionCoefficients:g,tangentialDistortionCoefficients:f}=this,l=[i,o,n,p,s,d,u,h,v];return this.isAdvanced&&(w==null||w.forEach(y=>l.push(y)),l.push(N),m==null||m.forEach(y=>l.push(y)),m==null||m.forEach(y=>l.push(y)),g==null||g.forEach(y=>l.push(y)),f==null||f.forEach(y=>l.push(y))),l.map(y=>Number.isNaN(y)?"":y).join("|")}};e([t({json:{write:!0}})],P.prototype,"type",void 0),e([t({type:[Number],json:{write:!0}})],P.prototype,"affineTransformations",void 0),e([t({type:Number,json:{write:!0}})],P.prototype,"focalLength",void 0),e([t({type:[Number],json:{write:!0}})],P.prototype,"principalOffsetPoint",void 0),e([t({type:[Number],json:{write:!0}})],P.prototype,"radialDistortionCoefficients",void 0),e([t({type:[Number],json:{write:!0}})],P.prototype,"tangentialDistortionCoefficients",void 0),e([t({type:Number,json:{write:!0}})],P.prototype,"yaw",void 0),e([t({type:Number,json:{write:!0}})],P.prototype,"pitch",void 0),e([t({type:Number,json:{write:!0}})],P.prototype,"roll",void 0),e([t({type:Number,json:{write:!0}})],P.prototype,"x",void 0),e([t({type:Number,json:{write:!0}})],P.prototype,"y",void 0),e([t({type:Number,json:{write:!0}})],P.prototype,"z",void 0),P=e([S("esri.layers.orientedImagery.core.CameraOrientationYPR")],P);const me=P,W=new Map;W.set("2",{desc:"Using Omega Phi Kappa",constructor:de}),W.set("1",{desc:"Using Heading, Pitch and Roll",constructor:ye}),W.set("3",{desc:"Using Yaw, Pitch and Roll",constructor:me}),W.set("4",{desc:"Using Local Tangent Plane",constructor:ce});let x=class extends O(Y){constructor(){super(...arguments),this.url=null}};e([t({type:Number,json:{write:!0}})],x.prototype,"lod",void 0),e([t({type:String,json:{write:!0}})],x.prototype,"rasterFunction",void 0),e([t({type:String,json:{write:!0}})],x.prototype,"url",void 0),x=e([S("esri.layers.orientedImagery.core.ElevationSourceDefinitions.ElevationSource")],x);let U=class extends O(Y){constructor(){super(...arguments),this.constantElevation=null}};e([t({type:Number,json:{write:!0}})],U.prototype,"constantElevation",void 0),U=e([S("esri.layers.orientedImagery.core.ElevationSourceDefinitions.ConstantElevation")],U);const fe=r=>r!=null&&typeof r.constantElevation=="number";function he(r,i,o){return i&&(r=`${i}${r}`),o&&(r+=`${o}`),r}function ge(r,i,o){let{url:n}=r;return n?(n=he(n,i,o),new x({...r,url:n})):null}function ve(r,i,o){return r&&(fe(r)?new U(r):ge(r,i,o))}const L=new _({Minutes:"minutes",Hours:"hours",Days:"days",Weeks:"weeks",Months:"months",Years:"years"}),V=new _({Feet:"feet",Meter:"meter"}),q=new _({360:"360",Horizontal:"horizontal",Inspection:"inspection",Nadir:"nadir",Oblique:"oblique",Terrestrial360Video:"terrestrial-360-video",TerrestrialFrameVideo:"terrestrial-frame-video",Aerial360Video:"aerial-360-video",AerialFrameVideo:"aerial-frame-video","":null}),K=new Map;function we(r){const[i,o,n,p,s,d,u,h,v,w,N,m,g,f,l,y,$,T,z,C,E,F]=r.slice(1);return{horizontalWKID:i,verticalWKID:o,x:n,y:p,z:s,omega:d,phi:u,kappa:h,...H([v,w,N,m,g,f],[y,$],[T,z,C],[E,F],l)}}K.set("1",je),K.set("3",be),K.set("2",we),K.set("4",Pe);const R=r=>{const i=r.map(o=>parseFloat(o)).filter(o=>!isNaN(o));if(i.length===r.length)return i};function H(r,i,o,n,p){const s=R(r),d=R(i),u=R(o),h=R(n);return{affineTransformations:(s==null?void 0:s.length)===6?s:void 0,focalLength:(s==null?void 0:s.length)===6?parseFloat(p):void 0,principalOffsetPoint:(d==null?void 0:d.length)!==2?[0,0]:d,radialDistortionCoefficients:(u==null?void 0:u.length)!==3?[0,0,0]:u,tangentialDistortionCoefficients:(h==null?void 0:h.length)!==2?[0,0]:h}}function je(r){const[i,o,n,p,s,d,u,h,v,w,N,m,g,f,l,y,$,T,z,C,E,F]=r.slice(1);return{horizontalWKID:i,verticalWKID:o,x:n,y:p,z:s,heading:d,pitch:u,roll:h,...H([v,w,N,m,g,f],[y,$],[T,z,C],[E,F],l)}}function be(r){const[i,o,n,p,s,d,u,h,v,w,N,m,g,f,l,y,$,T,z,C,E,F]=r.slice(1);return{horizontalWKID:i,verticalWKID:o,x:n,y:p,z:s,yaw:d,pitch:u,roll:h,...H([v,w,N,m,g,f],[y,$],[T,z,C],[E,F],l)}}function Pe(r){var v;const[i,o,n,p,s,...d]=r.slice(1),u=K.get(s),h=(v=W.get(s))==null?void 0:v.constructor;return!u||!h?null:{latitude:i,longitude:o,ellipsoidRadius:n,squaredEccentricity:p,properties:new h(u([s,"",...d]))}}function Ie(r){return Array.isArray(r)&&(r==null?void 0:r.length)>5&&!r.some(isNaN)}function Ne(r){for(r=r.slice(0,8);r.length<8;)r.push(0);return r}const De=new Set(["demPathPrefix","demPathSuffix","depthImagePathPrefix","depthImagePathSuffix","elevationSource","horizontalMeasurementUnit","imageGeometryField","imageReferenceField","referenceIDField","sequenceOrderField","verticalMeasurementUnit","videoPathPrefix","videoPathSuffix","timeAnimation","visibilityTimeExtent"]),Se=new Set(["elevationSource"]),J=(r,i)=>!De.has(i)&&r,xe=(r,i,o)=>{const n=`orientedImageryProperties.${r}`,p={allowNull:Se.has(r),ignoreOrigin:!0};return{name:n,write:i?{...p,target:n,writer:i}:p,read:o?{ignoreOrigin:!0,source:n,reader:o}:{ignoreOrigin:!0}}};function Oe(r){return r.json&&(r.json.origins=r.json.origins??{},r.json.origins["web-scene"]={write:!1,read:!1}),r}function c(r,i,o,n){const{name:p,write:s,read:d}=xe(r,i,o),u={name:p,write:s,read:d,origins:{service:{name:`orientedImageryInfo.${p}`,write:i,read:o},"web-scene":{name:p,write:J(s,r),read:J(d,r)},"web-map":{name:p,write:s,read:d}}};return n&&u.origins&&(u.type=n,u.origins["web-map"].type=n,u.origins["web-scene"].type=n),u}let a=class extends pe{constructor(r){super(r),this.attributeTableTemplate=null,this.cameraHeading=null,this.cameraHeight=null,this.cameraPitch=null,this.cameraRoll=null,this.coveragePercent=null,this.demPathPrefix=null,this.demPathSuffix=null,this.depthImagePathPrefix=null,this.depthImagePathSuffix=null,this.elevationSource=null,this.farDistance=null,this.geometryType="point",this.graphicOrigin=new ue(this),this.horizontalFieldOfView=null,this.horizontalMeasurementUnit=null,this.imageGeometryField="ImageGeometry",this.imagePathPrefix=null,this.imagePathSuffix=null,this.imageReferenceField="OIObjectID",this.imageRotation=null,this.maximumDistance=null,this.nearDistance=null,this.operationalLayerType="OrientedImageryLayer",this.orientationAccuracy=null,this.orientedImageryType=null,this.referenceIDField="OBJECTID",this.sequenceOrderField="SequenceOrder",this.supportedSourceTypes=new Set(["Oriented Imagery Layer"]),this.type="oriented-imagery",this.timeIntervalUnit="days",this.useViewTime=!0,this.verticalFieldOfView=null,this.verticalMeasurementUnit=null,this.videoPathPrefix=null,this.videoPathSuffix=null,this.virtualCacheDirectory=null,this.visibilityTimeExtent=null}get effectiveElevationSource(){const{elevationSource:r,demPathPrefix:i,demPathSuffix:o}=this;return ve(r,i,o)}set fieldConfigurations(r){}get fieldConfigurations(){}writePopupTemplate(r,i,o,n){r&&(i[o]=r.toJSON(n))}set portalItem(r){super.portalItem=r}async save(r){return this._debouncedSaveOperations(0,r)}async saveAs(r,i){return this._debouncedSaveOperations(1,i,r)}findFirstValidLayerId(r){var i,o;return(o=(i=r.layers)==null?void 0:i.find(n=>this.supportedSourceTypes.has(n.type)))==null?void 0:o.id}_verifySource(){if(super._verifySource(),this.geometryType!=="point")throw new te("oriented-imagery-layer:invalid-geometry-type","OrientedImageryLayer only supports point geometry type")}};e([t({type:re,json:{write:!1,read:!1}})],a.prototype,"attributeTableTemplate",void 0),e([t({type:Number,json:c("cameraHeading")})],a.prototype,"cameraHeading",void 0),e([t({type:Number,json:c("cameraHeight")})],a.prototype,"cameraHeight",void 0),e([t({type:Number,json:c("cameraPitch")})],a.prototype,"cameraPitch",void 0),e([t({type:Number,json:c("cameraRoll")})],a.prototype,"cameraRoll",void 0),e([t({type:Number,json:c("coveragePercent")})],a.prototype,"coveragePercent",void 0),e([t({type:String,json:c("demPathPrefix")})],a.prototype,"demPathPrefix",void 0),e([t({type:String,json:c("demPathSuffix")})],a.prototype,"demPathSuffix",void 0),e([t({type:String,json:c("depthImagePathPrefix")})],a.prototype,"depthImagePathPrefix",void 0),e([t({type:String,json:c("depthImagePathSuffix")})],a.prototype,"depthImagePathSuffix",void 0),e([t({type:Object,json:c("elevationSource")})],a.prototype,"elevationSource",void 0),e([t({readOnly:!0})],a.prototype,"effectiveElevationSource",null),e([t({type:Number,json:c("farDistance")})],a.prototype,"farDistance",void 0),e([t({json:{write:!1}})],a.prototype,"fieldConfigurations",null),e([t()],a.prototype,"geometryType",void 0),e([t({readOnly:!0,clonable:!1})],a.prototype,"graphicOrigin",void 0),e([t({type:Number,json:c("horizontalFieldOfView")})],a.prototype,"horizontalFieldOfView",void 0),e([t({type:String,json:c("horizontalMeasurementUnit")})],a.prototype,"horizontalMeasurementUnit",void 0),e([t({type:String,json:{...c("imageGeometryField"),default:"ImageGeometry"}})],a.prototype,"imageGeometryField",void 0),e([t({type:String,json:c("imagePathPrefix")})],a.prototype,"imagePathPrefix",void 0),e([t({type:String,json:c("imagePathSuffix")})],a.prototype,"imagePathSuffix",void 0),e([t({type:String,json:{...c("imageReferenceField"),default:"OIObjectID"}})],a.prototype,"imageReferenceField",void 0),e([t({type:Number,json:c("imageRotation")})],a.prototype,"imageRotation",void 0),e([t({type:Number,json:c("maximumDistance")})],a.prototype,"maximumDistance",void 0),e([t({type:Number,json:c("nearDistance")})],a.prototype,"nearDistance",void 0),e([t({type:["OrientedImageryLayer"],json:{origins:{"portal-item":{name:"layerType",write:{enabled:!0,ignoreOrigin:!0}}}}})],a.prototype,"operationalLayerType",void 0),e([t({json:{...c("orientationAccuracy",(r,i,o)=>{se(o,r.join(";"),i)},r=>{var o;const i=(o=r==null?void 0:r.split(";"))==null?void 0:o.map(Number);return Ie(i)?Ne(i):[0,0,0,0,0,0,0,0]},String)}})],a.prototype,"orientationAccuracy",void 0),e([t({json:{...c("orientedImageryType",q.write,q.read,q.jsonValues.slice(1))}})],a.prototype,"orientedImageryType",void 0),e([ie("popupTemplate")],a.prototype,"writePopupTemplate",null),e([t({type:String,json:{...c("referenceIDField"),default:"OBJECTID"}})],a.prototype,"referenceIDField",void 0),e([t({type:String,json:{...c("sequenceOrderField"),default:"SequenceOrder"}})],a.prototype,"sequenceOrderField",void 0),e([t({json:{read:!1},value:"oriented-imagery",readOnly:!0})],a.prototype,"type",void 0),e([t({type:L.apiValues,json:{...c("timeIntervalUnit",L.write,L.read,L.jsonValues)}})],a.prototype,"timeIntervalUnit",void 0),e([t(Oe(oe(ne)))],a.prototype,"useViewTime",void 0),e([t({type:Number,json:c("verticalFieldOfView")})],a.prototype,"verticalFieldOfView",void 0),e([t({type:V.apiValues,json:{...c("verticalMeasurementUnit",V.write,V.read,V.jsonValues)}})],a.prototype,"verticalMeasurementUnit",void 0),e([t({type:String,json:c("videoPathPrefix")})],a.prototype,"videoPathPrefix",void 0),e([t({type:String,json:c("videoPathSuffix")})],a.prototype,"videoPathSuffix",void 0),e([t({type:String,json:{read:!1,write:!1,origins:{service:{name:"orientedImageryInfo.orientedImageryProperties.virtualCacheDirectory",read:!0}}}})],a.prototype,"virtualCacheDirectory",void 0),e([t({type:ae,json:{origins:{"web-scene":{write:!1,read:!1}}}})],a.prototype,"visibilityTimeExtent",void 0),a=e([S("esri.layers.OrientedImageryLayer")],a);const Qe=a;export{Qe as default};
