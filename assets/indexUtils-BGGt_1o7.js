import{aL as c,k1 as d,k2 as y,k3 as m,k4 as p,k5 as _,at as h,H as b,as as A,b as g,f as w,iR as i,aD as B}from"./index-MBf2dn39.js";import{f as R,A as $}from"./Indices-BpMW4q8F.js";function I(e,t){l(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function l(e,t,o=2,r=o){const n=t.length/2;let a=0,f=0;if(!c(t)||d(t)){for(let s=0;s<n;++s)e[a]=t[f],e[a+1]=t[f+1],a+=o,f+=r;return}const u=y(t);if(m(t))for(let s=0;s<n;++s)e[a]=Math.max(t[f]/u,-1),e[a+1]=Math.max(t[f+1]/u,-1),a+=o,f+=r;else for(let s=0;s<n;++s)e[a]=t[f]/u,e[a+1]=t[f+1]/u,a+=o,f+=r}function S(e,t,o,r){const n=e.typedBuffer,a=e.typedBufferStride,f=(r==null?void 0:r.count)??e.count;let u=((r==null?void 0:r.dstIndex)??0)*a;for(let s=0;s<f;++s)n[u]=t,n[u+1]=o,u+=a}Object.freeze(Object.defineProperty({__proto__:null,fill:S,normalizeIntegerBuffer:l,normalizeIntegerBufferView:I},Symbol.toStringTag,{value:"Module"}));class D{constructor(t){this._streamDataRequester=t}async loadJSON(t,o){return this._load(0,t,o)}async loadBinary(t,o){return _(t)?(h(o),p(t)):this._load(1,t,o)}async loadImage(t,o){return this._load(2,t,o)}async _load(t,o,r){if(this._streamDataRequester==null)return(await b(o,{responseType:k[t]})).data;const n=await A(this._streamDataRequester.request(o,t,r));if(n.ok===!0)return n.value;throw w(n.error),new g("glt-loader-request-error",`Request for resource failed: ${n.error}`)}}const k={2:"image",1:"array-buffer",0:"json",3:void 0};function L(e,t){switch(t){case i.TRIANGLES:return q(e);case i.TRIANGLE_STRIP:return T(e);case i.TRIANGLE_FAN:return N(e)}}function q(e){return typeof e=="number"?$(e):B(e)?new Uint16Array(e):e}function T(e){const t=typeof e=="number"?e:e.length;if(t<3)return[];const o=t-2,r=R(3*o);if(typeof e=="number"){let n=0;for(let a=0;a<o;a+=1)a%2==0?(r[n++]=a,r[n++]=a+1,r[n++]=a+2):(r[n++]=a+1,r[n++]=a,r[n++]=a+2)}else{let n=0;for(let a=0;a<o;a+=1)a%2==0?(r[n++]=e[a],r[n++]=e[a+1],r[n++]=e[a+2]):(r[n++]=e[a+1],r[n++]=e[a],r[n++]=e[a+2])}return r}function N(e){const t=typeof e=="number"?e:e.length;if(t<3)return new Uint16Array(0);const o=t-2,r=o<=65536?new Uint16Array(3*o):new Uint32Array(3*o);if(typeof e=="number"){let u=0;for(let s=0;s<o;++s)r[u++]=0,r[u++]=s+1,r[u++]=s+2;return r}const n=e[0];let a=e[1],f=0;for(let u=0;u<o;++u){const s=e[u+2];r[f++]=n,r[f++]=a,r[f++]=s,a=s}return r}export{I as a,S as b,D as l,l as n,L as o};
