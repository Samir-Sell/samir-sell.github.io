import{oo as O}from"./index-DalZQxea.js";import{A as Z,S as Q,g as P,l as g,B as J,D as k,i as S,a as T,C as z,P as W,F as ee,L as G,H as K,e as X,I as te}from"./Theme-DMNtrMDt.js";class se extends Z{constructor(){super(...arguments),Object.defineProperty(this,"processor",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}incrementRef(){}decrementRef(){}_onPush(e){this.processor&&this.processor.processRow(e),super._onPush(e)}_onInsertIndex(e,t){this.processor&&this.processor.processRow(t),super._onInsertIndex(e,t)}_onSetIndex(e,t,s){this.processor&&this.processor.processRow(s),super._onSetIndex(e,t,s)}}class B extends Q{constructor(e,t,s){super(s),Object.defineProperty(this,"component",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dataContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"bullets",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"open",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"close",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.dataContext=t,this.component=e,this._settings.visible=!0,this._checkDirty()}markDirty(){this.component.markDirtyValues(this)}_startAnimation(){this.component._root._addAnimation(this)}_animationTime(){return this.component._root.animationTime}_dispose(){this.component&&this.component.disposeDataItem(this),super._dispose()}show(e){this.setRaw("visible",!0),this.component&&this.component.showDataItem(this,e)}hide(e){this.setRaw("visible",!1),this.component&&this.component.hideDataItem(this,e)}isHidden(){return!this.get("visible")}}class j extends P{constructor(){super(...arguments),Object.defineProperty(this,"_data",{enumerable:!0,configurable:!0,writable:!0,value:new se}),Object.defineProperty(this,"_dataItems",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_mainDataItems",{enumerable:!0,configurable:!0,writable:!0,value:this._dataItems}),Object.defineProperty(this,"valueFields",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"fields",{enumerable:!0,configurable:!0,writable:!0,value:["id"]}),Object.defineProperty(this,"_valueFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valueFieldsF",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fieldsF",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valuesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataChanged",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataGrouped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"inited",{enumerable:!0,configurable:!0,writable:!0,value:!1})}set data(e){e.incrementRef(),this._data.decrementRef(),this._data=e}get data(){return this._data}_dispose(){super._dispose(),this._data.decrementRef()}_onDataClear(){}_afterNew(){super._afterNew(),this._data.incrementRef(),this._updateFields(),this._disposers.push(this.data.events.onAll(e=>{const t=this._mainDataItems;if(this.markDirtyValues(),this._markDirtyGroup(),this._dataChanged=!0,e.type==="clear")g(t,s=>{s.dispose()}),t.length=0,this._onDataClear();else if(e.type==="push"){const s=new B(this,e.newValue,this._makeDataItem(e.newValue));t.push(s),this.processDataItem(s)}else if(e.type==="setIndex"){const s=t[e.index],i=this._makeDataItem(e.newValue);s.bullets&&s.bullets.length==0&&(s.bullets=void 0),J(i).forEach(r=>{s.animate({key:r,to:i[r],duration:this.get("interpolationDuration",0),easing:this.get("interpolationEasing")})}),s.dataContext=e.newValue}else if(e.type==="insertIndex"){const s=new B(this,e.newValue,this._makeDataItem(e.newValue));t.splice(e.index,0,s),this.processDataItem(s)}else if(e.type==="removeIndex")t[e.index].dispose(),t.splice(e.index,1);else if(e.type==="moveIndex"){const s=t[e.oldIndex];t.splice(e.oldIndex,1),t.splice(e.newIndex,0,s)}else throw new Error("Unknown IStreamEvent type");this._afterDataChange()}))}_updateFields(){this.valueFields&&(this._valueFields=[],this._valueFieldsF={},g(this.valueFields,e=>{this.get(e+"Field")&&(this._valueFields.push(e),this._valueFieldsF[e]={fieldKey:e+"Field",workingKey:e+"Working"})})),this.fields&&(this._fields=[],this._fieldsF={},g(this.fields,e=>{this.get(e+"Field")&&(this._fields.push(e),this._fieldsF[e]=e+"Field")}))}get dataItems(){return this._dataItems}processDataItem(e){}_makeDataItem(e){const t={};return this._valueFields&&g(this._valueFields,s=>{const i=this.get(this._valueFieldsF[s].fieldKey);t[s]=e[i],t[this._valueFieldsF[s].workingKey]=t[s]}),this._fields&&g(this._fields,s=>{const i=this.get(this._fieldsF[s]);t[s]=e[i]}),t}makeDataItem(e,t){let s=new B(this,t,e);return this.processDataItem(s),s}pushDataItem(e,t){const s=this.makeDataItem(e,t);return this._mainDataItems.push(s),s}disposeDataItem(e){}showDataItem(e,t){return O(this,void 0,void 0,function*(){e.set("visible",!0)})}hideDataItem(e,t){return O(this,void 0,void 0,function*(){e.set("visible",!1)})}_clearDirty(){super._clearDirty(),this._valuesDirty=!1}_afterDataChange(){}_afterChanged(){if(super._afterChanged(),this._dataChanged){const e="datavalidated";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this}),this._dataChanged=!1}if(this._valuesDirty){const e="valueschanged";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this})}this.inited=!0}markDirtyValues(e){this.markDirty(),this._valuesDirty=!0}_markDirtyGroup(){this._dataGrouped=!1}markDirtySize(){this._sizeDirty=!0,this.markDirty()}getDataItemById(e){return k(this.dataItems,t=>t.get("id")==e)}}Object.defineProperty(j,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Component"});Object.defineProperty(j,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:P.classNames.concat([j.className])});function ie(l){return new Promise((e,t)=>{setTimeout(e,l)})}function he(l,e,t,s,i,r,n){if(!n||i){let o=0;switch(!i&&e!="millisecond"&&(o=l.getTimezoneOffset(),l.setUTCMinutes(l.getUTCMinutes()-o)),e){case"day":let h=l.getUTCDate();t>1||l.setUTCDate(h),l.setUTCHours(0,0,0,0);break;case"second":let u=l.getUTCSeconds();t>1&&(u=Math.floor(u/t)*t),l.setUTCSeconds(u,0);break;case"millisecond":if(t==1)return l;let f=l.getUTCMilliseconds();f=Math.floor(f/t)*t,l.setUTCMilliseconds(f);break;case"hour":let b=l.getUTCHours();t>1&&(b=Math.floor(b/t)*t),l.setUTCHours(b,0,0,0);break;case"minute":let d=l.getUTCMinutes();t>1&&(d=Math.floor(d/t)*t),l.setUTCMinutes(d,0,0);break;case"month":let _=l.getUTCMonth();t>1&&(t==2||t==3||t==4||t==6)&&(_=Math.floor(_/t)*t),l.setUTCMonth(_,1),l.setUTCHours(0,0,0,0);break;case"year":let a=l.getUTCFullYear();t>1&&(a=Math.floor(a/t)*t),l.setUTCFullYear(a,0,1),l.setUTCHours(0,0,0,0);break;case"week":let p=l.getUTCDate(),v=l.getUTCDay();S(s)||(s=1),v>=s?p=p-v+s:p=p-(7+v)+s,l.setUTCDate(p),l.setUTCHours(0,0,0,0);break}if(!i&&e!="millisecond"&&(l.setUTCMinutes(l.getUTCMinutes()+o),e=="day"||e=="week"||e=="month"||e=="year")){let h=l.getTimezoneOffset();if(h!=o){let u=h-o;l.setUTCMinutes(l.getUTCMinutes()+u)}}return l}else{if(isNaN(l.getTime()))return l;let o=l.getTime(),h=n.offsetUTC(l),u=l.getTimezoneOffset(),f=n.parseDate(l),b=f.year,d=f.month,_=f.day,a=f.hour,p=f.minute,v=f.second,w=f.millisecond,y=f.weekday,I=h-u;switch(e){case"day":a=0,p=I,v=0,w=0;break;case"second":p+=I,t>1&&(v=Math.floor(v/t)*t),w=0;break;case"millisecond":p+=I,t>1&&(w=Math.floor(w/t)*t);break;case"hour":t>1&&(a=Math.floor(a/t)*t),p=I,v=0,w=0;break;case"minute":t>1&&(p=Math.floor(p/t)*t),p+=I,v=0,w=0;break;case"month":t>1&&(d=Math.floor(d/t)*t),_=1,a=0,p=I,v=0,w=0;break;case"year":t>1&&(b=Math.floor(b/t)*t),d=0,_=1,a=0,p=I,v=0,w=0;break;case"week":S(s)||(s=1),y>=s?_=_-y+s:_=_-(7+y)+s,a=0,p=I,v=0,w=0;break}l=new Date(b,d,_,a,p,v,w);const C=l.getTime();let m=36e5;e=="hour"&&(m=36e5*t),C+m<=o&&(e=="hour"||e=="minute"||e=="second"||e=="millisecond")&&(l=new Date(C+m));let N=l.getTimezoneOffset(),$=n.offsetUTC(l)-N;return $!=I&&l.setTime(l.getTime()+($-I)*6e4),l}}class U extends j{constructor(){super(...arguments),Object.defineProperty(this,"_aggregatesCalculated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_selectionAggregatesCalculated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataProcessed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_psi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pei",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_baseSeriesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"bullets",{enumerable:!0,configurable:!0,writable:!0,value:new Z}),Object.defineProperty(this,"bulletsContainer",{enumerable:!0,configurable:!0,writable:!0,value:P.new(this._root,{width:T,height:T,position:"absolute"})})}_afterNew(){this.valueFields.push("value","customValue"),super._afterNew(),this.setPrivate("customData",{}),this._disposers.push(this.bullets.events.onAll(e=>{if(e.type==="clear")this._handleBullets(this.dataItems);else if(e.type==="push")this._handleBullets(this.dataItems);else if(e.type==="setIndex")this._handleBullets(this.dataItems);else if(e.type==="insertIndex")this._handleBullets(this.dataItems);else if(e.type==="removeIndex")this._handleBullets(this.dataItems);else if(e.type==="moveIndex")this._handleBullets(this.dataItems);else throw new Error("Unknown IListEvent type")}))}_dispose(){this.bulletsContainer.dispose(),super._dispose()}startIndex(){let e=this.dataItems.length;return Math.min(this.getPrivate("startIndex",0),e)}endIndex(){let e=this.dataItems.length;return Math.max(0,Math.min(this.getPrivate("endIndex",e),e))}_handleBullets(e){g(e,t=>{const s=t.bullets;s&&(g(s,i=>{i.dispose()}),t.bullets=void 0)}),this.markDirtyValues()}_makeBullets(e){this._shouldMakeBullet(e)&&(e.bullets=[],this.bullets.each(t=>{this._makeBullet(e,t)}))}_shouldMakeBullet(e){return!0}_makeBullet(e,t,s){const i=t(this._root,this,e);return i&&(i._index=s,this._makeBulletReal(e,i)),i}_makeBulletReal(e,t){let s=t.get("sprite");s&&(s._setDataItem(e),s.setRaw("position","absolute"),this.bulletsContainer.children.push(s)),t.series=this,e.bullets.push(t)}addBullet(e,t){e.bullets||(e.bullets=[]),t&&this._makeBulletReal(e,t)}_clearDirty(){super._clearDirty(),this._aggregatesCalculated=!1,this._baseSeriesDirty=!1,this._selectionAggregatesCalculated=!1}_prepareChildren(){super._prepareChildren();let e=this.startIndex(),t=this.endIndex();if(this.isDirty("name")&&this.updateLegendValue(),this.isDirty("heatRules")&&(this._valuesDirty=!0),this.isPrivateDirty("baseValueSeries")){const i=this.getPrivate("baseValueSeries");i&&this._disposers.push(i.onPrivate("startIndex",()=>{this._baseSeriesDirty=!0,this.markDirtyValues()}))}if(this.get("calculateAggregates")&&(this._valuesDirty&&!this._dataProcessed&&(this._aggregatesCalculated||(this._calculateAggregates(0,this.dataItems.length),this._aggregatesCalculated=!0,e!=0&&(this._psi=void 0))),(this._psi!=e||this._pei!=t||this.isPrivateDirty("adjustedStartIndex"))&&!this._selectionAggregatesCalculated&&(e===0&&t===this.dataItems.length&&this._aggregatesCalculated||this._calculateAggregates(e,t),this._selectionAggregatesCalculated=!0)),this.isDirty("tooltip")){let i=this.get("tooltip");i&&(i.hide(0),i.set("tooltipTarget",this))}if(this.isDirty("fill")||this.isDirty("stroke")){let i;const r=this.get("legendDataItem");if(r&&(i=r.get("markerRectangle"),i&&this.isVisible())){if(this.isDirty("stroke")){let n=this.get("stroke");i.set("stroke",n)}if(this.isDirty("fill")){let n=this.get("fill");i.set("fill",n)}}this.updateLegendMarker(void 0)}if(this.bullets.length>0){let i=this.startIndex(),r=this.endIndex();r<this.dataItems.length&&r++;for(let n=i;n<r;n++){let o=this.dataItems[n];o.bullets||this._makeBullets(o)}}}_handleRemoved(){}_adjustStartIndex(e){return e}_calculateAggregates(e,t){let s=this._valueFields;if(!s)throw new Error("No value fields are set for the series.");const i={},r={},n={},o={},h={},u={},f={},b={},d={};g(s,a=>{i[a]=0,r[a]=0,n[a]=0});const _=this.dataItems.length;g(s,a=>{let p=a+"Change",v=a+"ChangePercent",w=a+"ChangePrevious",y=a+"ChangePreviousPercent",I=a+"ChangeSelection",C=a+"ChangeSelectionPercent",m="valueY";(a=="valueX"||a=="openValueX"||a=="lowValueX"||a=="highValueX")&&(m="valueX");const N=this.getPrivate("baseValueSeries"),R=this.getPrivate("adjustedStartIndex",e),$=(x,D)=>{if(x){let c=x.get(D);c!=null&&(x.setRaw(w,c-d[m]),x.setRaw(y,(c-d[m])/d[m]*100),x.setRaw(I,c-u[m]),x.setRaw(C,(c-u[m])/u[m]*100),d[D]=c)}};for(let x=R;x<t;x++){const D=this.dataItems[x];if(D){let c=D.get(a);c!=null&&(n[a]++,i[a]+=c,r[a]+=Math.abs(c),b[a]=i[a]/n[a],(o[a]>c||o[a]==null)&&(o[a]=c),(h[a]<c||h[a]==null)&&(h[a]=c),f[a]=c,u[a]==null&&(u[a]=c,d[a]=c,N&&(u[m]=N._getBase(m))),e===0&&(D.setRaw(p,c-u[m]),D.setRaw(v,(c-u[m])/u[m]*100)),$(D,a))}}t<_&&$(this.dataItems[t],a),t+1<_&&$(this.dataItems[t+1],a),e>0&&e--,delete d[a];for(let x=e;x<R;x++){const D=this.dataItems[x];if(D){let c=D.get(a);d[a]==null&&(d[a]=c),c!=null&&(D.setRaw(w,c-d[m]),D.setRaw(y,(c-d[m])/d[m]*100),D.setRaw(I,c-u[m]),D.setRaw(C,(c-u[m])/u[m]*100),d[a]=c)}}}),g(s,a=>{this.setPrivate(a+"AverageSelection",b[a]),this.setPrivate(a+"CountSelection",n[a]),this.setPrivate(a+"SumSelection",i[a]),this.setPrivate(a+"AbsoluteSumSelection",r[a]),this.setPrivate(a+"LowSelection",o[a]),this.setPrivate(a+"HighSelection",h[a]),this.setPrivate(a+"OpenSelection",u[a]),this.setPrivate(a+"CloseSelection",f[a])}),e===0&&t===_&&g(s,a=>{this.setPrivate(a+"Average",b[a]),this.setPrivate(a+"Count",n[a]),this.setPrivate(a+"Sum",i[a]),this.setPrivate(a+"AbsoluteSum",r[a]),this.setPrivate(a+"Low",o[a]),this.setPrivate(a+"High",h[a]),this.setPrivate(a+"Open",u[a]),this.setPrivate(a+"Close",f[a])})}_updateChildren(){super._updateChildren(),this._psi=this.startIndex(),this._pei=this.endIndex(),this.isDirty("visible")&&this.bulletsContainer.set("visible",this.get("visible"));const e=this.get("heatRules");if(this._valuesDirty&&e&&e.length>0&&g(e,t=>{const s=t.minValue||this.getPrivate(t.dataField+"Low")||0,i=t.maxValue||this.getPrivate(t.dataField+"High")||0;g(t.target._entities,r=>{const n=r.dataItem.get(t.dataField);if(!S(n)){t.neutral&&r.set(t.key,t.neutral);const o=r.states;if(o){const h=o.lookup("default");h&&t.neutral&&h.set(t.key,t.neutral)}if(!t.customFunction)return}if(t.customFunction)t.customFunction.call(this,r,s,i,n);else{let o;t.logarithmic?o=(Math.log(n)*Math.LOG10E-Math.log(s)*Math.LOG10E)/(Math.log(i)*Math.LOG10E-Math.log(s)*Math.LOG10E):o=(n-s)/(i-s),S(n)&&(!S(o)||Math.abs(o)==1/0)&&(o=.5);let h;S(t.min)?h=t.min+(t.max-t.min)*o:t.min instanceof z?h=z.interpolate(o,t.min,t.max):t.min instanceof W&&(h=ee(o,t.min,t.max)),r.set(t.key,h);const u=r.states;if(u){const f=u.lookup("default");f&&f.set(t.key,h)}}})}),this.get("visible")){let t=this.dataItems.length,s=this.startIndex(),i=this.endIndex();i<t&&i++,s>0&&s--;for(let r=0;r<s;r++)this._hideBullets(this.dataItems[r]);for(let r=s;r<i;r++)this._positionBullets(this.dataItems[r]);for(let r=i;r<t;r++)this._hideBullets(this.dataItems[r])}}_positionBullets(e){e.bullets&&g(e.bullets,t=>{this._positionBullet(t);const s=t.get("sprite");t.get("dynamic")&&(s&&(s._markDirtyKey("fill"),s.markDirtySize()),s instanceof P&&s.walkChildren(i=>{i._markDirtyKey("fill"),i.markDirtySize(),i instanceof G&&i.text.markDirtyText()})),s instanceof G&&s.get("populateText")&&s.text.markDirtyText()})}_hideBullets(e){e.bullets&&g(e.bullets,t=>{let s=t.get("sprite");s&&s.setPrivate("visible",!1)})}_positionBullet(e){}_placeBulletsContainer(e){e.bulletsContainer.children.moveValue(this.bulletsContainer)}_removeBulletsContainer(){const e=this.bulletsContainer;e.parent&&e.parent.children.removeValue(e)}disposeDataItem(e){const t=e.bullets;t&&(g(t,s=>{s.dispose()}),e.bullets=void 0)}_getItemReaderLabel(){return""}showDataItem(e,t){const s=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return O(this,void 0,void 0,function*(){const i=[s.showDataItem.call(this,e,t)],r=e.bullets;r&&g(r,n=>{const o=n.get("sprite");o&&i.push(o.show(t))}),yield Promise.all(i)})}hideDataItem(e,t){const s=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return O(this,void 0,void 0,function*(){const i=[s.hideDataItem.call(this,e,t)],r=e.bullets;r&&g(r,n=>{const o=n.get("sprite");o&&i.push(o.hide(t))}),yield Promise.all(i)})}_sequencedShowHide(e,t){return O(this,void 0,void 0,function*(){if(this.get("sequencedInterpolation"))if(S(t)||(t=this.get("interpolationDuration",0)),t>0){const s=this.startIndex(),i=this.endIndex();yield Promise.all(K(this.dataItems,(r,n)=>O(this,void 0,void 0,function*(){let o=t||0;(n<s-10||n>i+10)&&(o=0);let h=this.get("sequencedDelay",0)+o/(i-s);yield ie(h*(n-s)),e?yield this.showDataItem(r,o):yield this.hideDataItem(r,o)})))}else yield Promise.all(K(this.dataItems,s=>e?this.showDataItem(s,0):this.hideDataItem(s,0)))})}updateLegendValue(e){if(e){const t=e.get("legendDataItem");if(t){const s=t.get("valueLabel");if(s){const r=s.text;let n="";s._setDataItem(e),n=this.get("legendValueText",r.get("text","")),s.set("text",n),r.markDirtyText()}const i=t.get("label");if(i){const r=i.text;let n="";i._setDataItem(e),n=this.get("legendLabelText",r.get("text","")),i.set("text",n),r.markDirtyText()}}}}updateLegendMarker(e){}_onHide(){super._onHide();const e=this.getTooltip();e&&e.hide()}hoverDataItem(e){}unhoverDataItem(e){}_getBase(e){const t=this.dataItems[this.startIndex()];return t?t.get(e):0}}Object.defineProperty(U,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Series"});Object.defineProperty(U,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:j.classNames.concat([U.className])});function q(l,e){for(let t=0,s=e.length;t<s;t++){const i=e[t];if(i.length>0){let r=i[0];if(r.length>0){let n=r[0];l.moveTo(n.x,n.y);for(let o=0,h=i.length;o<h;o++)ae(l,i[o])}}}}function ae(l,e){for(let t=0,s=e.length;t<s;t++){const i=e[t];l.lineTo(i.x,i.y)}}class V extends X{_beforeChanged(){super._beforeChanged(),(this.isDirty("points")||this.isDirty("segments")||this._sizeDirty||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){const e=this.get("points"),t=this.get("segments");if(e&&e.length>0){let s=e[0];this._display.moveTo(s.x,s.y),q(this._display,[[e]])}else if(t)q(this._display,t);else if(!this.get("draw")){let s=this.width(),i=this.height();this._display.moveTo(0,0),this._display.lineTo(s,i)}}}}Object.defineProperty(V,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Line"});Object.defineProperty(V,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:X.classNames.concat([V.className])});function de(l){return function(){return l}}const L=Math.PI,A=2*L,M=1e-6,re=A-M;function Y(l){this._+=l[0];for(let e=1,t=l.length;e<t;++e)this._+=arguments[e]+l[e]}function le(l){let e=Math.floor(l);if(!(e>=0))throw new Error(`invalid digits: ${l}`);if(e>15)return Y;const t=10**e;return function(s){this._+=s[0];for(let i=1,r=s.length;i<r;++i)this._+=Math.round(arguments[i]*t)/t+s[i]}}class ne{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Y:le(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,s,i){this._append`Q${+e},${+t},${this._x1=+s},${this._y1=+i}`}bezierCurveTo(e,t,s,i,r,n){this._append`C${+e},${+t},${+s},${+i},${this._x1=+r},${this._y1=+n}`}arcTo(e,t,s,i,r){if(e=+e,t=+t,s=+s,i=+i,r=+r,r<0)throw new Error(`negative radius: ${r}`);let n=this._x1,o=this._y1,h=s-e,u=i-t,f=n-e,b=o-t,d=f*f+b*b;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(d>M)if(!(Math.abs(b*h-u*f)>M)||!r)this._append`L${this._x1=e},${this._y1=t}`;else{let _=s-n,a=i-o,p=h*h+u*u,v=_*_+a*a,w=Math.sqrt(p),y=Math.sqrt(d),I=r*Math.tan((L-Math.acos((p+d-v)/(2*w*y)))/2),C=I/y,m=I/w;Math.abs(C-1)>M&&this._append`L${e+C*f},${t+C*b}`,this._append`A${r},${r},0,0,${+(b*_>f*a)},${this._x1=e+m*h},${this._y1=t+m*u}`}}arc(e,t,s,i,r,n){if(e=+e,t=+t,s=+s,n=!!n,s<0)throw new Error(`negative radius: ${s}`);let o=s*Math.cos(i),h=s*Math.sin(i),u=e+o,f=t+h,b=1^n,d=n?i-r:r-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>M||Math.abs(this._y1-f)>M)&&this._append`L${u},${f}`,s&&(d<0&&(d=d%A+A),d>re?this._append`A${s},${s},0,1,${b},${e-o},${t-h}A${s},${s},0,1,${b},${this._x1=u},${this._y1=f}`:d>M&&this._append`A${s},${s},0,${+(d>=L)},${b},${this._x1=e+s*Math.cos(r)},${this._y1=t+s*Math.sin(r)}`)}rect(e,t,s,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${s=+s}v${+i}h${-s}Z`}toString(){return this._}}function fe(l){let e=3;return l.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const s=Math.floor(t);if(!(s>=0))throw new RangeError(`invalid digits: ${t}`);e=s}return l},()=>new ne(e)}class F extends P{constructor(){super(...arguments),Object.defineProperty(this,"chartContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(P.new(this._root,{width:T,height:T,interactiveChildren:!1}))}),Object.defineProperty(this,"bulletsContainer",{enumerable:!0,configurable:!0,writable:!0,value:P.new(this._root,{interactiveChildren:!1,isMeasured:!1,position:"absolute",width:T,height:T})})}}Object.defineProperty(F,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Chart"});Object.defineProperty(F,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:P.classNames.concat([F.className])});class E extends F{constructor(){super(...arguments),Object.defineProperty(this,"seriesContainer",{enumerable:!0,configurable:!0,writable:!0,value:P.new(this._root,{width:T,height:T,isMeasured:!1})}),Object.defineProperty(this,"series",{enumerable:!0,configurable:!0,writable:!0,value:new te})}_afterNew(){super._afterNew(),this._disposers.push(this.series);const e=this.seriesContainer.children;this._disposers.push(this.series.events.onAll(t=>{if(t.type==="clear"){g(t.oldValues,r=>{this._removeSeries(r)});const s=this.get("colors");s&&s.reset();const i=this.get("patterns");i&&i.reset()}else if(t.type==="push")e.moveValue(t.newValue),this._processSeries(t.newValue);else if(t.type==="setIndex")e.setIndex(t.index,t.newValue),this._processSeries(t.newValue);else if(t.type==="insertIndex")e.insertIndex(t.index,t.newValue),this._processSeries(t.newValue);else if(t.type==="removeIndex")this._removeSeries(t.oldValue);else if(t.type==="moveIndex")e.moveValue(t.value,t.newIndex),this._processSeries(t.value);else if(t.type==="swap"){const s=t.a,i=t.b,r=this.series.indexOf(s),n=this.series.indexOf(i);e.moveValue(s,n),e.moveValue(i,r),this.series.each(o=>{this._processSeries(o),o.markDirtyValues()})}else throw new Error("Unknown IListEvent type")}))}_processSeries(e){e.chart=this,e._placeBulletsContainer(this)}_removeSeries(e){e._handleRemoved(),e.isDisposed()||(this.seriesContainer.children.removeValue(e),e._removeBulletsContainer())}}Object.defineProperty(E,"className",{enumerable:!0,configurable:!0,writable:!0,value:"SerialChart"});Object.defineProperty(E,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:F.classNames.concat([E.className])});class H extends V{}Object.defineProperty(H,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tick"});Object.defineProperty(H,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:V.classNames.concat([H.className])});export{j as C,B as D,E as S,H as T,U as a,de as c,he as r,fe as w};
